{% extends 'base.html' %}
{% block title %}Runner Dashboard{% endblock %}
{% block content %}


<form action="/logout-complete">
    <input type="submit" value="Logout" name="logout-button">
</form>

<form action="/account-settings">
    <input type="submit" value="Account Settings" name="account-settings-button">
</form>

<form action="/add-to-google-calendar" method="POST" id="add-to-google-calendar-form">
    <select id="time-zone" name="time-zone">
      <option value="Select your preferred timezone">Select your preferred timezone</option>
      <option value="Pacific/Honolulu">(GMT-10:00) Hawaii Time</option>
      <option value="America/Anchorage">(GMT-08:00) Alaska Time</option>
      <option value="America/Los_Angeles">(GMT-07:00) Pacific Time</option>
      <option value="America/Denver">(GMT-06:00) Mountain Time</option>
      <option value="America/Phoenix">(GMT-07:00) Mountain Time - Arizona</option>
      <option value="America/Chicago">(GMT-05:00) Central Time</option>
      <option value="America/New_York">(GMT-04:00) Eastern Time</option>
    </select>
    <select id="cal-run-start-time" name="cal-run-start-time">
      <option value="Select your preferred start time">Select your preferred start time</option>
      <option value="04:00">4:00am</option>
      <option value="05:00">5:00am</option>
      <option value="06:00">6:00am</option>
      <option value="07:00">7:00am</option>
      <option value="08:00">8:00am</option>
      <option value="09:00">9:00am</option>
      <option value="10:00">10:00am</option>
      <option value="11:00">11:00am</option>
      <option value="12:00">12:00pm</option>
      <option value="13:00">1:00pm</option>
      <option value="14:00">2:00pm</option>
      <option value="15:00">3:00pm</option>
      <option value="16:00">4:00pm</option>
      <option value="17:00">5:00pm</option>
      <option value="18:00">6:00pm</option>
      <option value="19:00">7:00pm</option>
      <option value="20:00">8:00pm</option>
      <option value="21:00">9:00pm</option>
      <option value="22:00">10:00pm</option>
      <option value="23:00">11:00pm</option>
      <option value="00:00">12:00am</option>
      <option value="01:00">1:00am</option>
      <option value="02:00">2:00am</option>
      <option value="03:00">3:00am</option>
    </select>
    <input type="submit" value="Add Runs to Google Calendar" name="add-to-gcal-button">
</form>

<form action="/opt-into-weekly-emails">
    <label>I would like to opt into weekly email run reminders:</label>
    <input type="checkbox" name="opt-into-weekly-emails">
</form>



<h1>Running Dashboard</h1>

{% if plan %}

<p>Countdown to Goal: {{ days_left_to_goal }} days</p>
<span>Total Workouts Completed: </span><span id="total-workouts">{{ total_workouts_completed }}</span><br>
<span>Total Miles Completed: </span> <span id="total-miles"> {{ total_miles_completed }}</span><br>
<h4 id="plan-name-title">{{ plan.name }}</h4>

<form>
<input id="plan-name-change-box" name="{{ plan.name }}" placeholder="update plan name here">
<input type="submit" name="save" value="save"><br><br>
</form>

<table id="plan-calendar" name="plan-calendar" border="1px">
  <thead id="plan-header">
    <tr>
      <th>Week</th>
      <th>Monday</th>
      <th>Tuesday</th>
      <th>Wednesday</th>
      <th>Thursday</th>
      <th>Friday</th>
      <th>Saturday</th>
      <th>Sunday</th>
    </tr>
  </thead>
  <tbody id="run-info-chart">
        {% for i in range(weeks_in_plan + 1) %}
          <tr>
            <td>Week {{ i + 1 }}</td>
            {% for date in dates[(i)*7:7*(i+1)] %}
              {% if date in runs %}
                {% if runs[date]['is_completed'] == True %}
                  <td><input type="checkbox" id="{{ runs[date]['run_id'] }}" value="{{ date }}" checked>  {{ date.month }}/{{ date.day }}: <br><br> {{ runs[date]['distance'] }} miles</td>
                {% else %}
                  <td><input type="checkbox" id="{{ runs[date]['run_id'] }}" value="{{ date }}">  {{ date.month }}/{{ date.day }}: <br><br> {{ runs[date]['distance'] }} miles</td>
                {% endif %}  
              {% else %}    
                <td id="{{ date }}" class="off-day">{{ date.month }}/{{ date.day }} <br><br>Off day!</td>
              {% endif %}
            {% endfor %}
          </tr>
        {% endfor %}
    </tbody>
  </table>
{% endif %}

<!-- <table id="plan-calendar" name="plan-calendar" border="1px">
    <thead id="plan-header">
      <tr>
        <th>Week</th>
        <th>Monday</th>
        <th>Tuesday</th>
        <th>Wednesday</th>
        <th>Thursday</th>
        <th>Friday</th>
        <th>Saturday</th>
        <th>Sunday</th>
      </tr>
    </thead>
    <tbody id="run-info-chart">
        {% for i in range(weeks_in_plan + 1) %}
            <tr>
            <td>Week {{ i + 1 }}</td>
            {% for run in plan.runs[(i)*7:7*(i+1)] %}
              {% if run.distance != 0.0 %}
                {% if run.is_completed %}
                  <td id="run{{ run.run_id }}"><input type="checkbox" id="{{ run.run_id }}" value="{{ run.run_id }}" checked>{{ run.date.date() }}: <br><br>{{ run.distance }} miles</td>
                {% else %}
                  <td id="run{{ run.run_id }}"><input type="checkbox" id="{{ run.run_id }}" value="{{ run.run_id }}">{{ run.date.date() }}: <br><br>{{ run.distance }} miles</td>
                {% endif %} 
              {% else %}
                <td id="run{{ run.run_id }}">{{ run.date.date() }}: <br><br>Off day!</td>
              {% endif %}
            {% endfor %}
            </tr>
        {% endfor %}
    </tbody>
  </table> -->

{% endblock %}